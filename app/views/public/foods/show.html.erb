<div class="container">
  <div class="row">
    <div class="col-6">
      <!--food_image-->
      <%= image_tag @food.get_image(540,500) %>

      <!--まな板に追加する-->
      <div>
        <!--値段の登録・更新-->
        <div>
          <h5>最近の<%= @food.name %>の値段を教えてください</h5>

          <% if @food.prices.where(customer_id: current_customer.id).exists? %>
            <%= form_with model: @price, url: food_prices_path(params[:id]), method: :patch do |f| %>
              <h4><%= f.label :food_price, "値段(100gあたり)" %></h4>
              <%= f.number_field :food_price, class: 'form-control border-dark w-75' %>
              <h4 class="">円</h4>
              <%= f.submit "値段を更新する", class: 'btn btn-success px-3' %>
            <% end %>

          <% else %>

            <%= form_with model: Price.new, url: food_prices_path(params[:id]) do |f| %>
              <div>
                <%= f.hidden_field :food_id, :value => @food.id %>
              </div>
              <h4><%= f.label :food_price, "値段(100gあたり)" %></h4>
              <%= f.number_field :food_price, class: 'form-control border-dark w-75', :placeholder => "値段を入力してください" %>
              <h4 class="">円</h4>
              <%= f.submit "値段を登録する", class: 'btn btn-success px-3' %>
            <% end %>
          <% end %>
        </div>

        <div>
          <%= form_with model: CuttingBoardFood.new, url: cutting_board_foods_path do |f| %>

            <%= f.hidden_field :food_id, :value => @food.id %>
          
            <div class="d-inline-flex align-items-center">
              <h4><%= f.label :amount, "分量" %></h4>
              <%= f.number_field :amount, class: 'form-control border-dark w-75', placeholder: '使用量を入力' %>
              <h4 class="">g</h4>
            </div>

            <div>
              <%= f.submit "まな板に乗せる", class: 'btn btn-success px-3' %>
            </div>
          <% end %>
        </div>
        
        <div>
          <%= form_with model: Meal.new, url: meal_index_path do |f| %>

            <%= f.hidden_field :food_id, :value => @food.id %>
          
            <div class="d-inline-flex align-items-center">
              <h4><%= f.label :amount, "分量" %></h4>
              <%= f.number_field :amount, class: 'form-control border-dark w-75', placeholder: '使用量を入力' %>
              <h4 class="">g</h4>
            </div>

            <div>
              <%= f.submit "まな板に乗せる", class: 'btn btn-success px-3' %>
            </div>
          <% end %>
        </div>


      <!--comment_form-->
      <div class="">
        <div>この食材について教えてください!!</div>

        <%= form_with model: [@food, @comment], url: food_comments_path(params[:id]) do |f| %>
          <div>
            <%= f.label :comment_genre_id, "質問を選んでください" %>

            <%= f.select :comment_genre_id, options_from_collection_for_select(CommentGenre.all, :id, :name) %>
          </div>

          <div><%= f.text_area :comment, placeholder: "答えを教えてください！" %></div>

          <div><%= f.submit '答えを送信する', class: 'btn btn-primary px-3' %></div>

        <% end %>
      </div>


    </div>

    <div class="col-6">
      <h1>
        <%= @food.name %>
      </h1>

      <div class="row">
        <!--栄養素-->
        <div class="col-6">
          <table class="table table-bordered border-primary">
            <tr>
              <th>エネルギー : kcal</th>
              <td><%= @food.energy %></td>
            </tr>

            <tr>
              <th>たんぱく質</th>
              <td><%= @food.protein %></td>
            </tr>

            <tr>
              <th>脂質</th>
              <td><%= @food.fat %></td>
            </tr>

            <tr>
              <th>炭水化物</th>
              <td><%= @food.carb %></td>
            </tr>

            <tr>
              <th>食塩相当量</th>
              <td><%= @food.salt_equivalent %></td>
            </tr>
          </table>
        </div>

        <!--コメント一覧-->
        <div class="col-6">
          <% @comments.each do |comment| %>
            <div class="card m-2">
              <div class="card-body">
                <h5 class="card-title">
                  <%= comment.comment_genre.name %>
                </h5>

                <p class="card-text">
                  <%= comment.comment %>
                </p>

                <div class="card-title"></div>

                <div class="card-link"></div>
              </div>
            </div>
          <% end %>
        </div>

      </div>
    </div>

  </div>
</div>
